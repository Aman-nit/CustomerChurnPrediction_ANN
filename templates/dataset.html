<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Dataset Information | Customer Churn Prediction</title>

    <!-- Bootstrap CSS -->
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css"
      rel="stylesheet"
    />
    <!-- Font Awesome -->
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css"
    />
    <!-- Google Fonts -->
    <link
      href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap"
      rel="stylesheet"
    />

    <style>
      :root {
        --primary-color: #6366f1;
        --secondary-color: #f1f5f9;
        --success-color: #10b981;
        --warning-color: #f59e0b;
        --danger-color: #ef4444;
        --info-color: #3b82f6;
        --dark-color: #1e293b;
        --light-color: #f8fafc;
        --border-radius: 12px;
        --box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1),
          0 2px 4px -1px rgba(0, 0, 0, 0.06);
      }

      body {
        font-family: "Inter", sans-serif;
        background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        min-height: 100vh;
      }

      .navbar {
        background: rgba(255, 255, 255, 0.95);
        backdrop-filter: blur(10px);
        border-bottom: 1px solid rgba(255, 255, 255, 0.2);
      }

      .main-container {
        padding: 2rem 0;
      }

      .dataset-card {
        background: white;
        border-radius: var(--border-radius);
        box-shadow: var(--box-shadow);
        border: none;
        margin-bottom: 2rem;
        overflow: hidden;
      }

      .card-header {
        background: linear-gradient(135deg, var(--primary-color), #8b5cf6);
        color: white;
        border: none;
        padding: 1.5rem;
      }

      .overview-grid {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
        gap: 1rem;
        margin-bottom: 2rem;
      }

      .overview-item {
        background: white;
        padding: 1.5rem;
        border-radius: var(--border-radius);
        box-shadow: var(--box-shadow);
        text-align: center;
        transition: transform 0.3s ease;
      }

      .overview-item:hover {
        transform: translateY(-5px);
      }

      .overview-icon {
        font-size: 2rem;
        margin-bottom: 1rem;
      }

      .overview-value {
        font-size: 1.8rem;
        font-weight: 700;
        color: var(--primary-color);
        margin-bottom: 0.5rem;
      }

      .overview-label {
        color: #64748b;
        font-size: 0.9rem;
      }

      .feature-card {
        background: #f8fafc;
        border: 1px solid #e2e8f0;
        border-radius: 8px;
        padding: 1rem;
        margin-bottom: 1rem;
        transition: all 0.3s ease;
      }

      .feature-card:hover {
        background: white;
        box-shadow: var(--box-shadow);
        transform: translateY(-2px);
      }

      .feature-name {
        font-weight: 600;
        color: var(--primary-color);
        font-size: 1.1rem;
      }

      .feature-type {
        font-size: 0.8rem;
        padding: 0.25rem 0.5rem;
        border-radius: 4px;
        color: white;
        display: inline-block;
        margin-left: 0.5rem;
      }

      .type-int64,
      .type-float64 {
        background: var(--success-color);
      }

      .type-object {
        background: var(--info-color);
      }

      .feature-stats {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(120px, 1fr));
        gap: 0.5rem;
        margin-top: 0.5rem;
      }

      .stat-item {
        text-align: center;
        padding: 0.5rem;
        background: white;
        border-radius: 4px;
        border: 1px solid #e2e8f0;
      }

      .stat-label {
        font-size: 0.7rem;
        color: #64748b;
        text-transform: uppercase;
        font-weight: 600;
      }

      .stat-value {
        font-weight: 600;
        color: var(--dark-color);
      }

      .chart-container {
        text-align: center;
        margin: 1rem 0;
      }

      .chart-image {
        max-width: 100%;
        height: auto;
        border-radius: 8px;
        box-shadow: var(--box-shadow);
      }

      .nav-pills .nav-link.active {
        background: linear-gradient(135deg, var(--primary-color), #8b5cf6);
      }

      .section-divider {
        height: 4px;
        background: linear-gradient(90deg, var(--primary-color), #8b5cf6);
        border-radius: 2px;
        margin: 2rem 0;
      }

      .data-quality-indicator {
        padding: 0.25rem 0.75rem;
        border-radius: 12px;
        font-size: 0.8rem;
        font-weight: 600;
      }

      .quality-excellent {
        background: #d1fae5;
        color: #065f46;
      }

      .quality-good {
        background: #dbeafe;
        color: #1e40af;
      }

      .quality-fair {
        background: #fef3c7;
        color: #92400e;
      }

      .quality-poor {
        background: #fee2e2;
        color: #991b1b;
      }

      .feature-description {
        background: #eff6ff;
        border-left: 4px solid var(--primary-color);
        padding: 1rem;
        margin: 1rem 0;
        border-radius: 0 8px 8px 0;
      }

      @media (max-width: 768px) {
        .overview-grid {
          grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
        }

        .feature-stats {
          grid-template-columns: repeat(auto-fit, minmax(100px, 1fr));
        }
      }
    </style>
  </head>
  <body>
    <!-- Navigation -->
    <nav class="navbar navbar-expand-lg">
      <div class="container">
        <a class="navbar-brand fw-bold" href="/">
          <i class="fas fa-chart-line text-primary me-2"></i>
          Churn Predictor AI
        </a>
        <div class="navbar-nav ms-auto">
          <a class="nav-link" href="/"
            ><i class="fas fa-home me-1"></i> Prediction</a
          >
          <a class="nav-link" href="/analytics"
            ><i class="fas fa-analytics me-1"></i> Analytics</a
          >
          <a class="nav-link active" href="/dataset"
            ><i class="fas fa-database me-1"></i> Dataset</a
          >
        </div>
      </div>
    </nav>

    <!-- Main Content -->
    <div class="container main-container">
      <!-- Header -->
      <div class="text-center text-white mb-4">
        <h1 class="display-5 fw-bold mb-3">Dataset Information</h1>
        <p class="lead">Comprehensive overview of the customer churn dataset</p>
      </div>

      {% if dataset.error %}
      <div class="alert alert-danger" role="alert">
        <i class="fas fa-exclamation-triangle me-2"></i>
        Error loading dataset information: {{ dataset.error }}
      </div>
      {% else %}

      <!-- Dataset Overview -->
      <div class="overview-grid">
        <div class="overview-item">
          <div class="overview-icon text-primary">
            <i class="fas fa-table"></i>
          </div>
          <div class="overview-value">{{ dataset.overview.total_records }}</div>
          <div class="overview-label">Total Records</div>
        </div>
        <div class="overview-item">
          <div class="overview-icon text-info">
            <i class="fas fa-columns"></i>
          </div>
          <div class="overview-value">
            {{ dataset.overview.total_features }}
          </div>
          <div class="overview-label">Features</div>
        </div>
        <div class="overview-item">
          <div class="overview-icon text-success">
            <i class="fas fa-memory"></i>
          </div>
          <div class="overview-value">{{ dataset.overview.memory_usage }}</div>
          <div class="overview-label">Memory Usage</div>
        </div>
        <div class="overview-item">
          <div
            class="overview-icon text-{% if dataset.overview.missing_values == 0 %}success{% else %}warning{% endif %}"
          >
            <i
              class="fas fa-{% if dataset.overview.missing_values == 0 %}check-circle{% else %}exclamation-triangle{% endif %}"
            ></i>
          </div>
          <div class="overview-value">
            {{ dataset.overview.missing_values }}
          </div>
          <div class="overview-label">Missing Values</div>
        </div>
      </div>

      <!-- Dataset Description -->
      <div class="card dataset-card">
        <div class="card-header">
          <h3 class="mb-0">
            <i class="fas fa-info-circle me-2"></i>
            Dataset Description
          </h3>
        </div>
        <div class="card-body">
          <div class="feature-description">
            <h5>
              <i class="fas fa-database me-2 text-primary"></i>Customer Churn
              Modeling Dataset
            </h5>
            <p class="mb-2">
              This dataset contains information about bank customers and their
              churn behavior. It includes demographic information, account
              details, and service usage patterns that can be used to predict
              whether a customer will leave the bank.
            </p>
            <p class="mb-2">
              <strong>Source:</strong> Synthetic banking customer data designed
              for churn prediction modeling
            </p>
            <p class="mb-0">
              <strong>Target Variable:</strong> <code>Exited</code> - Binary
              indicator (0: Customer stayed, 1: Customer churned)
            </p>
          </div>

          <!-- Navigation Tabs -->
          <ul class="nav nav-pills mb-4" id="datasetTab" role="tablist">
            <li class="nav-item" role="presentation">
              <button
                class="nav-link active"
                id="features-tab"
                data-bs-toggle="pill"
                data-bs-target="#features"
                type="button"
                role="tab"
              >
                <i class="fas fa-list me-1"></i> Feature Details
              </button>
            </li>
            <li class="nav-item" role="presentation">
              <button
                class="nav-link"
                id="distributions-tab"
                data-bs-toggle="pill"
                data-bs-target="#distributions"
                type="button"
                role="tab"
              >
                <i class="fas fa-chart-histogram me-1"></i> Distributions
              </button>
            </li>
            <li class="nav-item" role="presentation">
              <button
                class="nav-link"
                id="target-analysis-tab"
                data-bs-toggle="pill"
                data-bs-target="#target-analysis"
                type="button"
                role="tab"
              >
                <i class="fas fa-bullseye me-1"></i> Target Analysis
              </button>
            </li>
          </ul>

          <div class="tab-content" id="datasetTabContent">
            <!-- Features Tab -->
            <div
              class="tab-pane fade show active"
              id="features"
              role="tabpanel"
            >
              <h5>
                <i class="fas fa-cogs me-2 text-primary"></i>Feature
                Specifications
              </h5>
              <div class="row">
                {% for column in dataset.columns %}
                <div class="col-lg-6 col-xl-4">
                  <div class="feature-card">
                    <div class="d-flex align-items-center mb-2">
                      <span class="feature-name">{{ column.name }}</span>
                      <span
                        class="feature-type type-{{ column.type.replace('64', '') }}"
                      >
                        {{ column.type }}
                      </span>
                    </div>

                    <div class="feature-stats">
                      <div class="stat-item">
                        <div class="stat-label">Non-Null</div>
                        <div class="stat-value">{{ column.non_null }}</div>
                      </div>
                      <div class="stat-item">
                        <div class="stat-label">Unique</div>
                        <div class="stat-value">{{ column.unique_values }}</div>
                      </div>
                      {% if column.null_count is defined %}
                      <div class="stat-item">
                        <div class="stat-label">Missing</div>
                        <div
                          class="stat-value {% if column.null_count > 0 %}text-warning{% endif %}"
                        >
                          {{ column.null_count }}
                        </div>
                      </div>
                      {% endif %}
                    </div>

                    {% if column.mean is defined %}
                    <!-- Numerical feature stats -->
                    <div class="feature-stats mt-2">
                      <div class="stat-item">
                        <div class="stat-label">Mean</div>
                        <div class="stat-value">{{ column.mean }}</div>
                      </div>
                      <div class="stat-item">
                        <div class="stat-label">Std Dev</div>
                        <div class="stat-value">{{ column.std }}</div>
                      </div>
                      <div class="stat-item">
                        <div class="stat-label">Min</div>
                        <div class="stat-value">{{ column.min }}</div>
                      </div>
                      <div class="stat-item">
                        <div class="stat-label">Max</div>
                        <div class="stat-value">{{ column.max }}</div>
                      </div>
                    </div>
                    {% endif %} {% if column.top_values is defined %}
                    <!-- Categorical feature stats -->
                    <div class="mt-2">
                      <div class="stat-label mb-1">Top Values:</div>
                      {% for value, count in column.top_values.items() %}
                      <div class="d-flex justify-content-between">
                        <span>{{ value }}:</span>
                        <span class="fw-bold">{{ count }}</span>
                      </div>
                      {% endfor %}
                    </div>
                    {% endif %}

                    <!-- Data Quality Indicator -->
                    <div class="mt-2">
                      {% set quality_score = (column.non_null /
                      dataset.overview.total_records|int) * 100 %}
                      <span
                        class="data-quality-indicator {% if quality_score == 100 %}quality-excellent {% elif quality_score >= 95 %}quality-good {% elif quality_score >= 90 %}quality-fair {% else %}quality-poor{% endif %}"
                      >
                        {{ "%.1f"|format(quality_score) }}% Complete
                      </span>
                    </div>
                  </div>
                </div>
                {% endfor %}
              </div>
            </div>

            <!-- Distributions Tab -->
            <div class="tab-pane fade" id="distributions" role="tabpanel">
              <h5>
                <i class="fas fa-chart-line me-2 text-primary"></i>Feature
                Distributions
              </h5>

              <div class="row">
                <div class="col-12">
                  <h6>Numerical Features Distribution</h6>
                  <div class="chart-container">
                    <img
                      src="data:image/png;base64,{{ dataset.charts.numerical_features }}"
                      class="chart-image"
                      alt="Numerical Features Distribution"
                    />
                  </div>
                </div>
              </div>

              <div class="section-divider"></div>

              <div class="row">
                <div class="col-12">
                  <h6>Categorical Features Distribution</h6>
                  <div class="chart-container">
                    <img
                      src="data:image/png;base64,{{ dataset.charts.categorical_features }}"
                      class="chart-image"
                      alt="Categorical Features Distribution"
                    />
                  </div>
                </div>
              </div>
            </div>

            <!-- Target Analysis Tab -->
            <div class="tab-pane fade" id="target-analysis" role="tabpanel">
              <h5>
                <i class="fas fa-target me-2 text-primary"></i>Target Variable
                Analysis
              </h5>

              <div class="row">
                <div class="col-lg-8">
                  <div class="chart-container">
                    <img
                      src="data:image/png;base64,{{ dataset.charts.target_distribution }}"
                      class="chart-image"
                      alt="Target Distribution"
                    />
                  </div>
                </div>
                <div class="col-lg-4">
                  <div class="feature-description">
                    <h6>
                      <i class="fas fa-info-circle me-2"></i>Target Variable:
                      Exited
                    </h6>
                    <p><strong>Type:</strong> Binary Classification</p>
                    <p><strong>Classes:</strong></p>
                    <ul>
                      <li>
                        <strong>0:</strong> Customer Stayed (Negative Class)
                      </li>
                      <li>
                        <strong>1:</strong> Customer Churned (Positive Class)
                      </li>
                    </ul>
                    <p>
                      <strong>Business Impact:</strong> Identifying customers
                      likely to churn enables proactive retention strategies.
                    </p>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>

      <!-- Feature Descriptions -->
      <div class="card dataset-card">
        <div class="card-header">
          <h3 class="mb-0">
            <i class="fas fa-book me-2"></i>
            Feature Glossary
          </h3>
        </div>
        <div class="card-body">
          <div class="row">
            <div class="col-lg-6">
              <h6>
                <i class="fas fa-user me-2 text-primary"></i>Customer
                Demographics
              </h6>
              <ul class="list-unstyled">
                <li><strong>Age:</strong> Customer's age in years</li>
                <li>
                  <strong>Gender:</strong> Customer's gender (Male/Female)
                </li>
                <li>
                  <strong>Geography:</strong> Customer's country (France,
                  Germany, Spain)
                </li>
              </ul>

              <h6>
                <i class="fas fa-credit-card me-2 text-primary"></i>Financial
                Information
              </h6>
              <ul class="list-unstyled">
                <li>
                  <strong>CreditScore:</strong> Customer's credit score
                  (300-850)
                </li>
                <li><strong>Balance:</strong> Current account balance</li>
                <li>
                  <strong>EstimatedSalary:</strong> Estimated annual salary
                </li>
              </ul>
            </div>
            <div class="col-lg-6">
              <h6>
                <i class="fas fa-building-columns me-2 text-primary"></i>Banking
                Relationship
              </h6>
              <ul class="list-unstyled">
                <li><strong>Tenure:</strong> Number of years as a customer</li>
                <li>
                  <strong>NumOfProducts:</strong> Number of bank products used
                </li>
                <li>
                  <strong>HasCrCard:</strong> Whether customer has a credit card
                  (1/0)
                </li>
                <li>
                  <strong>IsActiveMember:</strong> Whether customer is active
                  (1/0)
                </li>
              </ul>

              <h6><i class="fas fa-bullseye me-2 text-primary"></i>Target</h6>
              <ul class="list-unstyled">
                <li>
                  <strong>Exited:</strong> Whether customer churned (1) or
                  stayed (0)
                </li>
              </ul>
            </div>
          </div>
        </div>
      </div>
      {% endif %}
    </div>

    <!-- Bootstrap JS -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
  </body>
</html>
